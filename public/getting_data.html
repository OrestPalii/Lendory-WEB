<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parsing firebase</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>


<body id="getting_body" >
    <header class="header">
        <div class="header_inner">
            <a href="index.html">
            <img class="header_logo"src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/logo.svg?alt=media&token=026b0f3e-af29-41ed-b128-d15df5ecc4ab" alt="">
            </a>   
            <div class="text-field__group">
                        <button class="text-field__btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                            </svg>
                        </button>
                          <input class="text-field__input" type="search"  name="" placeholder="Пошук">
                    </div>
                        <nav class="nav">
                            <a href="about.html"> <img src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/AboutUs.png?alt=media&token=a62d422a-1be4-4ca9-9dd4-810e39cb1c1b" alt=""> Про нас</a>
                            <a href="Services.html"> <img src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/services.png?alt=media&token=e0da6157-7b8a-41bf-80dd-b03d8baa75fe" alt=""> Підтримка</a>
                            <a href="getting_data.html"> <img src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/document-free-icon-font%201.png?alt=media&token=a05f066e-4bea-4bf8-b798-e7affff9eb31" alt=""> Оголошення</a>
                            <a id='userlink' href="profile.html"><img src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/user-free-icon-font%20(1)%201.png?alt=media&token=c967e8f1-bb4f-4092-b242-70654ee0e544" alt=""> Username </a>
                            <a id="signoutlink" href="#"> <img src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/sign-in-alt-free-icon-font%202.png?alt=media&token=37d4a899-06eb-418d-8bb0-f4d9a9a34681" alt=""> Вийти</a>
                        </nav>
        </div>
    </header>
    
    <div id="tbody1">
        
    </div>
    
    <script type="module">
        var tbody = document.getElementById("tbody1");
        
        
        function AddItemToTable(name, loc, descript, img_num, hashnumber){
            let big_div = document.createElement("div");
            let left_description = document.createElement("div");
            let right_description = document.createElement("div");
            let image = document.createElement("img");
            let like_btn=document.createElement("img")
            let info_on_photo =document.createElement("div")
            let label_location=document.createElement("label")
            let label_price=document.createElement("label")
            let btn_like=document.createElement("label")
            let other_image = document.createElement("img");
            let other_image_back = document.createElement("img");
            let count_photo = document.createElement("p");
            let td1 = document.createElement("p");
            let td2 = document.createElement("p");
            let td3 = document.createElement("p");
            let more = document.createElement("a");



            big_div.setAttribute(
                'style',
                'position: relative; text-align: center; margin-top: 30px; margin-left: 30px; width: 400px; height: 453px; background-color: rgb(255, 255, 255); border-radius: 35px; z-index:1;'
            )

            left_description.setAttribute(
                'style', 
                'text-align: center; margin-left: 28px; padding: 10px; margin-top: 10px; float: left; position: relative;'
            )

            right_description.setAttribute(
                'style', 
                'text-align: left; margin-top: -55px; position: relative;padding-top: 70px;padding-left: 15px;float: right;color: #fff;background: url(https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/gradient1.jpg?alt=media&token=903b7447-ad43-44d3-b559-4a66f7c958e6) no-repeat;background-size: cover;width: 230.73px;height: 232.41px;border-radius: 35px;z-index: 1;'
            )

            image.setAttribute(
                'style',
                'float: right;border-radius: 30px;width: 400.17px;height: 276.57px;position: relative;object-fit: cover;z-index: 10; '
            )
           like_btn.setAttribute(
               'style',
               'width:40px,height:40px'
           )


            other_image.setAttribute(
                'style',
                'border:none;margin-left: -15px;margin-top: 2px; width: 122.18px;height: 117.09px;object-fit: cover;border-radius: 20px;filter: grayscale(100%); z-index:20;'
            )

            other_image_back.setAttribute(
                'style',
                'margin-left: -122px;margin-top: 2px; width: 122.18px;height: 117.09px;object-fit: cover;border:none;border-radius: 20px; background-color:#000; opacity: 0.6 ;z-index:25;'
            )

            count_photo.setAttribute(
                'style',
                'position: absolute;margin-top: -125px;margin-left: 8px;font-size: 80px;color: #fff;  '
            )

            more.setAttribute(

                'style',
                'background-color: blue; width: 200px; height: 200px; margin: 20px; margin-left: 100px;'
            )

            td1.innerHTML = name;
            td2.innerHTML = loc;
            td3.innerHTML = descript;

            label_location.innerHTML = loc;
            count_photo.innerHTML = '+3'
            more.innerHTML = 'Більше'
            image.src = img_num;
            other_image_back.src=img_num;

            other_image.src = "wert.jfif"
            like_btn.src="https://firebasestorage.googleapis.com/v0/b/lendory-b5d8b.appspot.com/o/heart.png?alt=media&token=c9c648e6-e83e-4762-aaca-8a78b1761255"
            more.href = 'advertreview.html#' + hashnumber; 

        
            big_div.appendChild(image);
            like_btn.appendChild(big_div);
            left_description.appendChild(other_image);
            left_description.appendChild(other_image_back);
            left_description.appendChild(count_photo);
            right_description.appendChild(td1);
            right_description.appendChild(td2);
            right_description.appendChild(td3);
            big_div.appendChild(left_description);
            big_div.appendChild(right_description);
            big_div.appendChild(more);
            tbody.appendChild(big_div);

            
            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);

            tbody.appendChild(trow);
            
        }

        function AddAllItemsToTable(TheAdvertisement){
            tbody.innerHTML="";
            TheAdvertisement.forEach(element => {
                AddItemToTable(element.name, element.location, element.description);
                
            });
        }

        


        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  
        const firebaseConfig = {
            apiKey: "AIzaSyCPf1_9AlKYGFEF0nHn3c1IGH8BecVSeig",
            authDomain: "lendory-b5d8b.firebaseapp.com",
            databaseURL: "https://lendory-b5d8b-default-rtdb.firebaseio.com",
            projectId: "lendory-b5d8b",
            storageBucket: "lendory-b5d8b.appspot.com",
            messagingSenderId: "759222136421",
            appId: "1:759222136421:web:8c38d800bca06e1e6ce08c"
        };

        const app = initializeApp(firebaseConfig);

        import {getDatabase, ref, child, onValue, get }
            from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
            const db = getDatabase();

        function GetAllDataOnce(){
            const dbRef = ref(db);
            get(child(dbRef, "advertisementtest"))
            .then((snapshot)=>{
                var advertisements = [];
                snapshot.forEach(childSnapshot =>{
                    advertisements.push(childSnapshot.val());
                });
                AddAllItemsToTable(advertisements);
            })
        }
        window.onload = GetAllDataOnce; 
    </script>
</body>
</html>