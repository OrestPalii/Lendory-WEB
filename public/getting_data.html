<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parsing firebase</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style_div.css">
</head>
<body>
    <div id="tbody1">
        
    </div>

    <script type="module">
        var tbody = document.getElementById("tbody1");
        
        function AddItemToTable(name, loc, descript){
            let trow = document.createElement("div");
            let td1 = document.createElement("p");
            let td2 = document.createElement("p");
            let td3 = document.createElement("p");

            trow.setAttribute(
                'style',
                'background-color: blue; width: 200px; height: 200px; margin: 20px; margin-left: 100px;'
            )

            td1.innerHTML = name;
            td2.innerHTML = loc;
            td3.innerHTML = descript;

            
            
            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);

            tbody.appendChild(trow);
            
        }

        function AddAllItemsToTable(TheAdvertisement){
            tbody.innerHTML="";
            TheAdvertisement.forEach(element => {
                AddItemToTable(element.name, element.location, element.description);
                
            });
        }

        


        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  
        const firebaseConfig = {
            apiKey: "AIzaSyCPf1_9AlKYGFEF0nHn3c1IGH8BecVSeig",
            authDomain: "lendory-b5d8b.firebaseapp.com",
            databaseURL: "https://lendory-b5d8b-default-rtdb.firebaseio.com",
            projectId: "lendory-b5d8b",
            storageBucket: "lendory-b5d8b.appspot.com",
            messagingSenderId: "759222136421",
            appId: "1:759222136421:web:8c38d800bca06e1e6ce08c"
        };

        const app = initializeApp(firebaseConfig);

        import {getDatabase, ref, child, onValue, get }
            from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
            const db = getDatabase();

        function GetAllDataOnce(){
            const dbRef = ref(db);
            get(child(dbRef, "advertisementtest"))
            .then((snapshot)=>{
                var advertisements = [];
                snapshot.forEach(childSnapshot =>{
                    advertisements.push(childSnapshot.val());
                });
                AddAllItemsToTable(advertisements);
            })
        }
        window.onload = GetAllDataOnce; 
    </script>
</body>
</html>